#!/usr/bin/env python3
"""
ğŸ§  NovaSystem Startup Script
============================
Launch the NovaSystem CLI with style!

Usage:
    ./nova              # Interactive mode
    ./nova ask "..."    # Quick question
    ./nova solve "..."  # Full Nova Process
    ./nova status       # Check system status
"""

import os
import sys
from pathlib import Path

# Ensure the package is importable
script_dir = Path(__file__).parent.absolute()
if str(script_dir) not in sys.path:
    sys.path.insert(0, str(script_dir))

# Suppress noisy loggers
import logging
logging.basicConfig(level=logging.WARNING)
for noisy in ["PIL", "httpcore", "httpx", "gradio", "urllib3", "asyncio", "fsspec"]:
    logging.getLogger(noisy).setLevel(logging.ERROR)


def print_startup_banner():
    """Print the NovaSystem startup banner."""
    banner = """
\033[96mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                                                                â•‘
â•‘   â–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•—   â–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•—   â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â•‘
â•‘   â–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—    â–ˆâ–ˆâ•”â•â•â•â•â•â•šâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•”â•â•â•â•â•â•šâ•â•â–ˆâ–ˆâ•”â•â•â•  â•‘
â•‘   â–ˆâ–ˆâ•”â–ˆâ–ˆâ•— â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â•šâ–ˆâ–ˆâ–ˆâ–ˆâ•”â• â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ•‘     â•‘
â•‘   â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘    â•šâ•â•â•â•â–ˆâ–ˆâ•‘  â•šâ–ˆâ–ˆâ•”â•  â•šâ•â•â•â•â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘     â•‘
â•‘   â–ˆâ–ˆâ•‘ â•šâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â• â•šâ–ˆâ–ˆâ–ˆâ–ˆâ•”â• â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘     â•‘
â•‘   â•šâ•â•  â•šâ•â•â•â• â•šâ•â•â•â•â•â•   â•šâ•â•â•â•  â•šâ•â•  â•šâ•â•    â•šâ•â•â•â•â•â•â•   â•šâ•â•   â•šâ•â•â•â•â•â•â•   â•šâ•â•     â•‘
â•‘                                                                                â•‘
â•‘\033[0m   \033[92mğŸ§  Multi-Agent Problem Solving System\033[0m                          \033[93mv2.0.0\033[96m   â•‘
â•‘                                                                                â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                                â•‘
â•‘\033[0m   \033[97mCommands:\033[0m                                                                  \033[96mâ•‘
â•‘\033[0m     â€¢ \033[96mnova ask "question"\033[0m      Quick AI response                             \033[96mâ•‘
â•‘\033[0m     â€¢ \033[96mnova chat\033[0m                Interactive chat session                      \033[96mâ•‘
â•‘\033[0m     â€¢ \033[96mnova solve "problem"\033[0m     Full Nova Process analysis                    \033[96mâ•‘
â•‘\033[0m     â€¢ \033[96mnova experts "topic"\033[0m     Multi-expert panel discussion                 \033[96mâ•‘
â•‘\033[0m     â€¢ \033[96mnova status\033[0m              Check system configuration                    \033[96mâ•‘
â•‘                                                                                â•‘
â•‘\033[0m   \033[93mğŸ’¡ Tip: Use --help with any command for more options\033[0m                       \033[96mâ•‘
â•‘                                                                                â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\033[0m
"""
    print(banner)


def check_environment():
    """Check if the environment is properly configured."""
    issues = []

    # Check for API keys
    api_keys = {
        "ANTHROPIC_API_KEY": "Claude models",
        "OPENAI_API_KEY": "OpenAI models",
        "GOOGLE_API_KEY": "Gemini models",
        "GEMINI_API_KEY": "Gemini models (alt)",
    }

    found_any = False
    for key, desc in api_keys.items():
        if os.getenv(key):
            found_any = True
            break

    if not found_any:
        issues.append("âš ï¸  No API keys found. Set ANTHROPIC_API_KEY, OPENAI_API_KEY, or GOOGLE_API_KEY")

    return issues


def main():
    """Main entry point for the NovaSystem startup script."""
    # Load environment variables
    try:
        from dotenv import load_dotenv
        load_dotenv()
    except ImportError:
        pass  # dotenv not required

    # Show banner only for interactive use (no args or just --help)
    if len(sys.argv) == 1:
        print_startup_banner()

        # Check environment
        issues = check_environment()
        if issues:
            print("\033[93m" + "\n".join(issues) + "\033[0m\n")

        print("\033[90mRun 'nova --help' for available commands.\033[0m\n")

        # Show interactive hint
        print("\033[97mğŸš€ Quick Start:\033[0m")
        print("   \033[96mnova ask \"What is machine learning?\"\033[0m")
        print("   \033[96mnova solve \"How do I optimize my database?\"\033[0m\n")
        return 0

    # Import and run the CLI
    try:
        from novasystem.cli.main import main as cli_main
        cli_main()
    except ImportError as e:
        print(f"\033[91mâŒ Error: Could not import NovaSystem CLI: {e}\033[0m")
        print("\033[93mMake sure NovaSystem is installed: pip install -e .\033[0m")
        return 1
    except KeyboardInterrupt:
        print("\n\033[90mğŸ‘‹ Goodbye!\033[0m")
        return 0
    except Exception as e:
        print(f"\033[91mâŒ Error: {e}\033[0m")
        return 1

    return 0


if __name__ == "__main__":
    sys.exit(main())
