#!/usr/bin/env python3
"""
üß† NovaSystem Startup Script
============================
Launch the NovaSystem CLI with style!

Usage:
    ./nova              # Interactive mode
    ./nova ask "..."    # Quick question
    ./nova solve "..."  # Full Nova Process
    ./nova status       # Check system status
"""

import os
import sys
from pathlib import Path

# Ensure the package is importable
script_dir = Path(__file__).parent.absolute()
if str(script_dir) not in sys.path:
    sys.path.insert(0, str(script_dir))

# Suppress noisy loggers
import logging
logging.basicConfig(level=logging.WARNING)
for noisy in ["PIL", "httpcore", "httpx", "gradio", "urllib3", "asyncio", "fsspec"]:
    logging.getLogger(noisy).setLevel(logging.ERROR)


def print_startup_banner():
    """Print the NovaSystem startup banner."""
    banner = """
\033[96m‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë                                                                                ‚ïë
‚ïë   ‚ñà‚ñà‚ñà‚ïó   ‚ñà‚ñà‚ïó ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó ‚ñà‚ñà‚ïó   ‚ñà‚ñà‚ïó ‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó     ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ñà‚ñà‚ïó   ‚ñà‚ñà‚ïó‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó  ‚ïë
‚ïë   ‚ñà‚ñà‚ñà‚ñà‚ïó  ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ïê‚ïê‚ïê‚ñà‚ñà‚ïó‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïó    ‚ñà‚ñà‚ïî‚ïê‚ïê‚ïê‚ïê‚ïù‚ïö‚ñà‚ñà‚ïó ‚ñà‚ñà‚ïî‚ïù‚ñà‚ñà‚ïî‚ïê‚ïê‚ïê‚ïê‚ïù‚ïö‚ïê‚ïê‚ñà‚ñà‚ïî‚ïê‚ïê‚ïù  ‚ïë
‚ïë   ‚ñà‚ñà‚ïî‚ñà‚ñà‚ïó ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïë    ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó ‚ïö‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó   ‚ñà‚ñà‚ïë     ‚ïë
‚ïë   ‚ñà‚ñà‚ïë‚ïö‚ñà‚ñà‚ïó‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë‚ïö‚ñà‚ñà‚ïó ‚ñà‚ñà‚ïî‚ïù‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïë    ‚ïö‚ïê‚ïê‚ïê‚ïê‚ñà‚ñà‚ïë  ‚ïö‚ñà‚ñà‚ïî‚ïù  ‚ïö‚ïê‚ïê‚ïê‚ïê‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë     ‚ïë
‚ïë   ‚ñà‚ñà‚ïë ‚ïö‚ñà‚ñà‚ñà‚ñà‚ïë‚ïö‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù ‚ïö‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù ‚ñà‚ñà‚ïë  ‚ñà‚ñà‚ïë    ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë     ‚ïë
‚ïë   ‚ïö‚ïê‚ïù  ‚ïö‚ïê‚ïê‚ïê‚ïù ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù   ‚ïö‚ïê‚ïê‚ïê‚ïù  ‚ïö‚ïê‚ïù  ‚ïö‚ïê‚ïù    ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù   ‚ïö‚ïê‚ïù   ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù   ‚ïö‚ïê‚ïù     ‚ïë
‚ïë                                                                                ‚ïë
‚ïë\033[0m   \033[92müß† Multi-Agent Problem Solving System\033[0m                          \033[93mv0.3.1\033[96m   ‚ïë
‚ïë                                                                                ‚ïë
‚ï†‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï£
‚ïë                                                                                ‚ïë
‚ïë\033[0m   \033[97mCommands:\033[0m                                                                  \033[96m‚ïë
‚ïë\033[0m     ‚Ä¢ \033[96mnova interactive\033[0m         Launch interactive terminal (screensaver!)    \033[96m‚ïë
‚ïë\033[0m     ‚Ä¢ \033[96mnova ask "question"\033[0m      Quick AI response                             \033[96m‚ïë
‚ïë\033[0m     ‚Ä¢ \033[96mnova chat\033[0m                Interactive chat session                      \033[96m‚ïë
‚ïë\033[0m     ‚Ä¢ \033[96mnova solve "problem"\033[0m     Full Nova Process analysis                    \033[96m‚ïë
‚ïë\033[0m     ‚Ä¢ \033[96mnova experts "topic"\033[0m     Multi-expert panel discussion                 \033[96m‚ïë
‚ïë\033[0m     ‚Ä¢ \033[96mnova status\033[0m              Check system configuration                    \033[96m‚ïë
‚ïë                                                                                ‚ïë
‚ïë\033[0m   \033[93müí° Tip: Use --help with any command for more options\033[0m                       \033[96m‚ïë
‚ïë                                                                                ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù\033[0m
"""
    print(banner)


def check_environment():
    """Check if the environment is properly configured."""
    issues = []

    # Check for API keys
    api_keys = {
        "ANTHROPIC_API_KEY": "Claude models",
        "OPENAI_API_KEY": "OpenAI models",
        "GOOGLE_API_KEY": "Gemini models",
        "GEMINI_API_KEY": "Gemini models (alt)",
    }

    found_any = False
    for key, desc in api_keys.items():
        if os.getenv(key):
            found_any = True
            break

    if not found_any:
        issues.append("‚ö†Ô∏è  No API keys found. Set ANTHROPIC_API_KEY, OPENAI_API_KEY, or GOOGLE_API_KEY")

    return issues


def main():
    """Main entry point for the NovaSystem startup script."""
    # Load environment variables
    try:
        from dotenv import load_dotenv
        load_dotenv()
    except ImportError:
        pass  # dotenv not required

    # Show banner only for interactive use (no args or just --help)
    if len(sys.argv) == 1:
        print_startup_banner()

        # Check environment
        issues = check_environment()
        if issues:
            print("\033[93m" + "\n".join(issues) + "\033[0m\n")

        print("\033[90mRun 'nova --help' for available commands.\033[0m\n")

        # Show interactive hint
        print("\033[97müöÄ Quick Start:\033[0m")
        print("   \033[96mnova ask \"What is machine learning?\"\033[0m")
        print("   \033[96mnova solve \"How do I optimize my database?\"\033[0m\n")
        return 0

    # Check for interactive mode
    if len(sys.argv) > 1 and sys.argv[1].lower() == "interactive":
        try:
            from novasystem_interactive import main as interactive_main
            interactive_main()
            return 0
        except ImportError as e:
            print(f"\033[91m‚ùå Error: Could not import interactive mode: {e}\033[0m")
            return 1

    # Import and run the CLI
    try:
        from novasystem.cli.main import main as cli_main
        cli_main()
    except ImportError as e:
        print(f"\033[91m‚ùå Error: Could not import NovaSystem CLI: {e}\033[0m")
        print("\033[93mMake sure NovaSystem is installed: pip install -e .\033[0m")
        return 1
    except KeyboardInterrupt:
        print("\n\033[90müëã Goodbye!\033[0m")
        return 0
    except Exception as e:
        print(f"\033[91m‚ùå Error: {e}\033[0m")
        return 1

    return 0


if __name__ == "__main__":
    sys.exit(main())
